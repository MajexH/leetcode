import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

public class MaximumScore_1770 {

    public int maximumScore(int[] nums, int[] multipliers) {
        //Map<String, Integer> memo = new HashMap<>();
        int[][] memo = new int[multipliers.length][multipliers.length];
        for (int i = 0; i < multipliers.length; i++) {
            Arrays.fill(memo[i], Integer.MAX_VALUE);
        }
        return recursion(0, multipliers, nums, 0, nums.length - 1, memo);
    }

    // 因为 left + n - 1 - right == index
    // 因为其结果代表的是 左边选取 left 个 右边选取 n - 1 - right 个
    // 而取出的结果
    public int recursion(int index, int[] multipliers, int[] nums, int left, int right, int[][] memo) {
        if (index >= multipliers.length) return 0;
        if (memo[left][index] != Integer.MAX_VALUE) return memo[left][index];
        int l = nums[left] * multipliers[index] + recursion(index + 1, multipliers, nums, left + 1, right, memo);
        int r = nums[right] * multipliers[index] + recursion(index + 1, multipliers, nums, left, right - 1, memo);
        memo[left][index] = Math.max(l, r);
        return memo[left][index];
    }

    public static void main(String[] args) {
//        System.out.println(new MaximumScore_1770().maximumScore(new int[]{1, 2, 3}, new int[]{3, 2, 1}));
//        System.out.println(new MaximumScore_1770().maximumScore(new int[]{-5, -3, -3, -2, 7, 1}, new int[]{-10, -5, 3, 4, 6}));
        System.out.println(new MaximumScore_1770().maximumScore(new int[]{-873, 791, 6, 87, -511, 838, 370, 331, -767, 958, -89, 599, 140, -3, -971, 266, 427, -20, 507, 917, -714, 968, 353, -503, 267, 315, -76, -708, 407, 449, -171, 461, -289, 33, -178, 554, 961, 453, 680, -359, 610, 815, 89, -332, 861, 991, -91, 957, 572, -53, -387, -880, -616, -135, -700, 189, -462, 970, -938, -856, 475, -759, -997, -888, 929, 903, 501, 304, 156, -512, -271, 837, -81, 68, 4, 31, 202, 552, 915, 472, -827, -675, -177, 999, -605, 579, -18, -116, -140, -943, -433, -16, 535, 617, 32, 721, -769, 56, -643, 224, -921, 63, 255, 683, -546, 839, 370, 88, -837, 464, 816, -329, 20, 868, -173, -127, -359, 406, 517, 611, -980, 300, -371, 125, 772, 691, -686, 340, -384, -351, 73, -721, -2, 633, -602, 557, 46, -957, 276, -806, 964, -896, 114, -646, 746, -282, -719, -508, 513, 697, -819, -988, 354, -311, -158, 441, -546, 619, -780, -824, -190, -90, -803, 363, -636, -177, -560, 267, 968, 749, 269, 286, 302, -463, -121, -197, -959, 940, 317, 268, -904, -553, -884, 980, 329, 667, 910, 176, -658, -463, 754, 977, -475, -27, -18, 549, -434, 279, 300, 620, -232, 177, -995, -135, -758, -919, 738, -142, -215, -96, 488, -921, -63, 997, 263, 250, -98, 915, -104, -442, -856, 562, -328, 788, 352, -775, 181, -753, 512, 292, 937, -965, 333, 500, -298, -580, 302, 96, -953, 191, -220, -544, 717, 401, 610, -964, 515, 790, 457, 404, -543, -540, 145, -520, 192, 840, -329, 689, 285, 470, 843, -755, 824, 157, 920, -486, 437, 114, -122, -376, -262, 53, -649, 539, -194, 970, -282, 788, -66, -477, 811, 638, -767, 103, 516, -621, 293, -901, 472, 35, 940, -153, 39, 781, -675, -635, -591, 39, 238, 966, -342, -784, 407, -948, 923, -712, 799, -147, 604, 406, 173, 734, -168, 349, -135, 114, -300, -553, -996, 260, -538, -916, 77, 34, 705, 811, -370, -504, -976, 271, 420, -737, -963, 57, -105, -178, -180, 251, 705, 750, 676, 624, -799, -415, 834, -105, 873, -876, 455, -344, 283, 23, 983, 904, 455, 188, 664, -640, -475, 187, 83, 445, -501, 453, -815, -510, -934, -88, -19, -612, -523, 969, -285, 290, -573, -480, -554, 883, -507, -286, -837, -617, -258, -963, 942, -594, 260, -200, -403, 840, 228, -436, -593, 695, -455, 385, 562, -781, 114, 311, -67, 986, 136, 453, 507, 631, 232, -810, -578, 115, -396, 75, -859, -546, -375, 482, 296, -695, -336, 801, -690, 143, -7, 586, 574, -663, 182, 395, -942, 954, 655, -69, -282, 353, -46, 77, 827, -545, 349, -9, 334, 453, -147, 312, -299, -988, 495, 13, 958, -962, 368, 770, 609, 754, 966, -548, -803, -428, 641, -984, -935, -171, 307, -965, -115, -519, -869, -460, -430, 799, 585, 620, -887, 429, -34, 68, -17, -453, -878, 33, 590, 543, -633, 650, 485, 626, -184, 284, 75, 929, -192, 770, 805, 583, 926, 888, -80, 821, 483, 771, 202, -418, 192, 123, 791, -568, -417, 622, 81, 858, 375, 940, 564, -788, 447, -541, -608, 493, 516, 69, -298, 347, 315, -123, -490, 698, 269, 899, -608, 83, -925, 768, 769, 796, 360, -632, -10, 712, 498, 660, -127, 739, 989, -206, -739, 95, -575, 182, -976, -764, -219, 293, 373, 799, -92, 320, 272, 329, -140, -728, -266, 150, 513, 809, -393, -874, -120, -874, 630, 322, 340, -923, 939, -184, -29, 12, 339, 534, -184, -258, 292, 186, 645, 486, 661, 636, -141, 443, -569, 284, 40, -242, 403, 743, -278, 395, -997, -216, -613, -251, -479, -676, -141, -507, 477, 305, 432, 263, 660, -614, 225, 352, 979, -205, 918, -726, -417, -548, -204, -60, 534, -825, 153, 649, -708, -370, -91, -382, 219, -419, -440, -329, -220, 998, -968, -475, 433, 67, -641, 604, -877, -788, 749, -179, -595, 989, 478, 735, -568, 592, -413, 482, 243, 232, 147, 888, 239, 102, -741, 460, -259, 302, -507, -549, 577, -181, -251, 711, -153, 763, -556, -727, 175, -9, 129, 532, 731, -235, -553, -765, 298, -509, 171, -641, -979, -640, 963, 995, -11, 392, -665, 704, -403, -558, 84, -467, -498, -784, -661, 69, -823, -336, -983, 549, 98, 1, 886, -873, -581, -723, 526, -118, 293, 866, -546, 627, 429, -544, 899, 287, -629, 406, 651, 984, 586, 404, -441, 230, -191, 197, -542, -479, 691, 950, -701, 659, -626, 181, 913, -763, 24, 171, 680, -546, -65, -187, 509, -771, -503, -245, -92, -234, -586, 771, -447, -744, 500, 501, 111, -123, 320, 571, 278, -412, -446, -392, -322, 184, -581, 208, 969, -886, 453, 68, 780, 826, 676, -676, 13, 210, -785, 372, -990, -269, 658, 675, -91, -44, 348, 700, -454, -313, 265, -228, -616, -189, 574, -246, -28, 502, 238, 200, -680, -596, -924, -876, 828, 212, -532, -932, 62, 596, -118, 870, 346, -365, 825, -491, -378, -580, -819, -651, -655, 964, 323, -870, 677, 26, -557, 524, 442, -141, -22, -252, 80, -716, -309, 906, 42, -826, 895, -798, 412, -253, 235, -405, -906, 910, 642, -827, -811, 488, 743, -275, 402, -613, 102, 579, -602, -985, 846, 486}, new int[]{-96, -24, -993, 122, -508, -905, 580, 104, 289, -662, -968, -467, -579, 288, -659, -941, -48, 726, -22, -484, 406, 241, 115, 364, 307, 470, -951, -923, 928, -316, -108, -134, 483, 241, 542, 61, 162, -685, -810, 8, -181, -465, 999, 22, 8, -770, -947, -281, 824, -382, 530, 459, -833, 373, -997, 149, 584, -409, 735, 15, 525, 342, -817, -787, 475, -806, 619, -10, 533, 543, -264, 877, -155, -869, 843, 484, 79, 785, -899, -436, 3, 133, 230, 330, 70, -467, -625, -317, 716, 479, -239, 646, -273, 728, 121, 688, 112, 72, 956, -113, 88, 487, -86, 623, -875, -384, -850, -412, -322, -894, 644, -782, -185, -507, -186, -68, 360, 148, -390, -714, 77, -611, -781, 256, 665, 31, 390, 133, -8, -434, 791, 756, 168, -651, 90, -461, 939, -117, 482, 669, -676, 823, 886, -957, -33, 789, 309, 503, 50, 710, 722, 908, -601, 399, 160, -576, 717, -600, 907, -911, -346, -263, 991, 708, 373, 922, -241, -743, 648, 278, 632, 293, -675, -960, -362, -139, -135, 380, -507, -283, -539, -274, 466, -601, 965, -411, -996, 965, -626, -337, -932, -495, 480, -262, 517, 759, -187, -871, 549, 407, -278, -71, -168, -668, 698, -72, -1000, 366, 934, 790, -82, -659, 388, 482, 661, -409, 408, 344, 229, 825, 452, -846, -644, -775, -436, -31, -445, -432, 326, 363, -813, 948, -506, -731, -183, 797, 376, -401, 43, 703, -235, 41, -288, -450, 134, 313, -764, -708, 386, -997, -23, -443, -793, -284, 803, 520, 761, 513, 668, -742, -567, 641, 865, -633, -566, -568, 77, 272, -779, -918, -146, -964, -772, -165, 958, -94, 676, -7, 301, 280, 947, 355, 649, -268, -78, -42, 721, 613, -319, 644, -948, -667, -300, 625, -535, 98, -321, 740, 304, 169, -339, -538, -203, -724, -65, -859, 744, -133, 677, -719, -45, -74, -832, 465, -916, 344, -178, -284, -622, 913, 224, 602, -643, -291, 111, -366, -365, 235, -812, -378, 347, -749, 584, -713, 947, -114, -856, -214, -336, 0, 122, -360, -172, 242, 443, -898, 75, 323, 659, -592, -204, -820, -989, -342, 904, 96, 972, -430, 734, 520, -361, 14, 668, 174, 618, -627, 997, -757, 898, 631, 798, -121, 423, -892, -152, 222, -456, 420, -874, -65, 719, 790, -681, 315, -615, -440, 213, -840, -590, -48, 869, 759, 694, -789, 90, -531, -408, 468, 244, 361, 283, -143, -491, 320, -207, -874, -789, 271, 665, -255, -773, -569, -282, 262, 822, -49, 176, 336, -523, 313, -458, -680, 95, -790, -277, 185, -526, 94, 491, 329, -511, 373, 415, 615, -438, -500, 542, -664, 685, -435, -867, 422, -865, 485, -506, -807, 940, 598, 847, -350, -547, 217, -627, -435, -360, 531, -296, -955, 621, 61, 610, 565, -671, -868, -612, 381, -312, -904, -264, -296, -182, -109, 59, 198, 971, 730, -106, -445, 106, 622, 981, -904, 855, -61, 850, 797, 807, 727, 249, 39, -555, -892, -883, 982, 428, 461, -380, 892, -112, -846, -964, -892, 617, 951, -682, -598, -95, -49, -37, -338, -333, 83, 778, -154, -463, -197, 472, -42, 207, -27, -311, 678, -666, -437, -734, -650, 456, -959, 836, -720, 405, 365, 747, -753, -809, -166, -638, 816, -246, -99, -433, 342, -134, -401, 520, 299, -535, -150, -365, -465, 149, -839, -177, 571, -579, 325, -413, -541, 149, -944, -800, -880, 338, -448, -931, -359, -674, 150, -313, -757, 906, 727, -434, 456, 948, 668, -116, -767, 526, 220, 588, -52, -453, -984, -552, 829, 739, 620, -660, 482, 455, -642, 561, 269, -589, 383, -702, 820, -414, 707, -277, -619, 875, 31, -82, -933, 465, 785, -643, 656, -280, -784, -602, -377, 964, -856, 911, -233, 967, -890, 968, -583, -834, 859, -797, -703, 43, 249, 155, -378, 219, 642, 766, 801, -209, -125, 801, 698, 847, 603, 623, 719, -976, 692, 298, 565, 78, -348, 128, 648, -741, -558, 950, 303, -524, 751, -485, 929, 692, 122, -603, 84, -627, -201, 550, 370, 450, 976, 905, -478, 292, 139, -85, -863, 968, -945, -886, 730, -515, -86, -968, 670, -930, -861, 431, -635, 224, -772, -351, -358, -58, 293, -674, -290, -215, 267, 119, 42, -206, 105, -712, -90, 179, -730, 498, -696, -775, -200, 254, 742, -965, 595, 178, 743, 394, -338, 767, -199, 83, 680, 121, 26, -328, -924, -357, -4, -508, -160, 921, -839, -878, -210, -579, -339, -219, 191, 148, 191, 580, -871, -947, 179, 480, -220, -567, 434, 427, 287, 128, -976, 8, 294, -216, -138, -828, 18, 866, 739, 954, -969, 263, -868, -307, 307, 64, -836, -160}));
    }
}
